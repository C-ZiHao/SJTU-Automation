# 数字图像处理

参考：《数字图像处理》冈萨雷斯版

## 图像处理基础

- 图像数据采集->图像增强->图像复原->图像分割->形态学处理->表示&描述->图像处理
- 图像采集

  - 小孔成像原理，类人眼
  - 图像采集原理：感光传感器的采样与量化
  - 彩色图像
    - 分光棱镜->三幅图感光，代价大
    - 滤光片->一幅图感光，算法处理插值
      - 最近邻插值、双线性插值、三次内插法
    - 颜色空间
      - RGB通道:三原色混色，正方体
      - HSI模型： 色度Hue，光强度Intensity，饱和度Saturation，两个棱锥
      - HSV三要素 色调Hue, 饱和度Saturation,亮度Value，圆锥
  - 图像参数
    - 曝光率->曝光时间越长，进光越多越亮，但太长运动模糊
    - 感光度ISO，低感光细腻
    - 焦距
    - 分辨率 = 像素总数量
- 像素之间关系

  - 4-邻域，8-临域，对角邻域
    - 4邻接必 8 邻接，反之不然
  - 4-连接，8-连接，m-连接 
    - 8连接歧义性
  - 连通->连通域： 两次扫描法，种子填充法
  - 距离度量： 欧式，曼哈顿，切比雪夫距离
  - 算术逻辑

    - 加法--图像叠加、去噪去除背景

    - 减法--运动物体（差分）

    - 除法--校正照明或传感器的非均匀性的灰度阴影

    - 乘法--放缩

    - 与，异或，非，或
  - 基本运算：点运算、邻域运算(模版运算如均值）、旋转，坐标变换，平移.etc、


  ## 形态学

- 基本思想：移动探针

- 基本关系: 包含于  击中  击不中

- 处理方法：

  - 腐蚀 Erode  ：去黑噪点，
  - 膨胀 Dilate ：填充去白噪，磨平棱角
  - 开运算 opening：先腐蚀后膨胀->平滑轮廓，去除毛刺
  - 闭运算 closing：先膨胀后腐蚀->平滑轮廓，填充缝隙

- 二值化形态学滤波

  - 形态学滤波
  - 平滑处理----开闭运算
  - 边缘提取: 结构元素腐蚀/膨胀，差---外边界与内边界

  - 区域填充
  - 细化： 八个常用细化序列依次进行
  - 粗化(厚化)

- 灰度形态学滤波

  - 灰度腐蚀/膨胀
  - 灰度开运算--平峰，去椒盐噪声（亮点）
  - 灰度闭运算--消谷，去椒盐噪声（暗点）
  - 灰度形态学

    - Top-Hat高帽运算--波峰检测，亮/暗背景求暗/亮聚集
    - Bot-Hat低帽运算--波谷检测，亮背景求暗点
    - 平滑--去斑
    - 边缘提取，形态学梯度


## 图像增强

- 有针对性地增强 轮廓，边缘，对比度等，难点：很难量化评价，依靠经验，无通用算法

- 空间域

  - 点运算，如灰度变换

    - 直接灰度变换： 取反、对比度增强、二值化、灰度窗口（突出、切分）、非线性变换

    - 依据灰度直方图

      - 均衡化 ：令灰度均匀，增强对比度 但不易控制

    
    - 规定化（匹配）：有选择性的增强
    

    - 彩色直方图 RGB转HSI再进行均衡/规定化

  - 领域运算

    - 图像平滑 -- 低通滤高频噪声

      - 邻域平均

      - 中值滤波 -- 去椒盐噪声

      - 灰度相近k点平均

      - 梯度倒数加权平滑 -- 将梯度导数作为权重再平均，边缘细节不至于模糊

      - 最小均方差滤波器 -- 9个模版内方差与均值，取最小方差模版的均值
    - 图像锐化--加强边缘轮廓，高通
      - 梯度，一阶：Roberts,Sobel,Prewitt,Kirsch  二阶：Laplace
    - 真彩色增强：RGB三通道非独立，可以映射到HSI空间，对I增强
    - 伪彩色增强：非真实，为了方便观感
    - 亮度切割法，不同灰度级映射
      
    - 灰度级->彩色变换：如安检
      
    - 频率域滤波法

- 频域

  - 高通滤波

  - 低通滤波

  - 同态滤波

- 彩色增强

  - 假彩色增强

  - 伪彩色增强

  - 彩色变换及其应用

- 代数运算

## 图像变换 

- 傅利叶变换（Fourier Transform）   
  - 对一维连续信号，当其满足Dirichlet(狄利赫里)条件，即具有有限个间断点与极值点，且绝对可积，其傅里叶变换绝对成立
  - 缺点：复数参数数据量大(实数两倍)->DCT
- 离散余弦变换（Discrete Cosine Transform）

  - 实质是傅里叶变化的实数部分，相比之下功能相同，数据量小

  - 应用：图像压缩编码（JPEG），语音信号处理
- 沃尔什-哈达玛变换（Walsh-Hadamard Transform)

  - 硬件实现时有用

  - 沃尔什->正负一级数，二值，适合计算机处理

  - 哈达玛->特殊排序的沃尔什变换
- 频域图像滤波与增强

  - 常用方法：通带滤波、同态滤波
  - 频域内，噪点/边缘对应高频，分布均匀部分对应低频
  - 频域平滑——低通滤波器->去噪
  - 频域高通滤波->保留边缘(锐化)
    - 理想、巴特沃斯、指数、梯形、
  - 带通、带阻->特定频率增强或抑制
  - 同态增晰：消除图像上照明不均的问题

## 图像分割

- 分割的依据

  - 相似性----基于区域，阈值分割，区域分割合并
  - 非连续性----检出物体边缘，边缘检测/跟踪
  - 两者互补
- 灰度阈值分割法（前景后景）

  - 直方图分割技术

    - 双峰法

    - 最佳阈值法：若正态+等方差+数目相等->前景背景均值的平均

  - 迭代法---逼近思想，区域平均灰度值

  - 最大类间方差法 OTSU（大津法）->最小二乘法

  - 最大熵阈值分割法

    - 一维最大熵阈值分割：使分割出的两部分一阶灰度信息熵最大，仅仅利用灰度点信息不用空间分布信息，信噪比低时不理想。

    - 二维最大熵阈值分割：点灰度+区域灰度均值的二维信息

  - 动态自适应阈值分割->细分为子图像，采取不同阈值

  - 分水岭算法：水坝 分水线 基于距离/梯度/标记
- 边缘检测 常含噪声->滤波

  - Robert
  - Sobel
  - Prewitt
  - Kirsch
  - Laplace
- LOG（高斯-拉普拉斯）：Gauss平滑滤波+Laplace锐化
  - Canny：高斯滤波+一阶偏导求梯度+根据梯度幅值非极大值抑制->双阈值算法（2:1或3:1)
  - 可加速部分：高斯可去，atan可换除法阈值，快速开根，排序快排
    - 非极大值抑制：若某像素梯度值与其梯度方向上前后两个像素的梯度值相比不是最大，则不是边缘
  - 双阈值：大于高->边缘，小于低->非边缘，中->相邻边缘则是边缘
- 霍夫检测

  - 笛卡尔坐标空间的线变换为极坐标空间中的点
  - 将给定形状的检测问题转化为变换空间中峰值点的问题
  - Hough变换-圆检测，投票->候补圆->非极大值抑制，依赖先验二值/边缘检测
- 区域分割

  - 区域生长法

    - 基于区域灰度差

    - 基于区域内灰度分布：小于阈值，区域合并

    - 基于区域形状

  - 分裂合并法：图像四叉树
- 主动轮廓线模型（SNAKE模型）

  - 提取感兴趣目标的轮廓

  - 曲线内力和外部约束力作用，收敛到能量最小值状态。

## 图像表示与描述

- 灰度图描述: 直方图等
- 边界描述

  - 链码 ChainCode 表示方向数比坐标节省空间

  - 形状数

  - 傅利叶描述子
- 纹理描述

  - 矩分析：一阶矩均值，二阶方差，三阶扭曲度，四阶峰度，熵

  - 灰度差分统计

  - 灰度共生矩阵

  - 不变矩
- Shapecontext算法： 边缘描述
- HOG算法（图像梯度方向直方图描述子）Histogram of Oriented Gradient
  - 人体目标检测等
  - hog提取特征+svm训练分类
- SIFT算法（尺度不变特征变换匹配算法） Scale Invariant Feature Transform
  - 特征向量平移、缩放、旋转、光照变化、仿射变换、投影变换不变性
  - 关键点检测(尺度、方向、大小三个特征，高斯滤波，金字塔方案)
  - 关键点描述
  - 关键点匹配
  - 消除错配点：RANSAC(随机匹配->检测->迭代)
- 其它特征描述：SURF(Sift算子增强，快) AKAZE LBP ORB BRISK FREAK

## 图像编码

- 图像压缩原理

  - 数据冗余：减少不会影响主要信息

  - 视觉冗余：减少不会消弱视觉感知
- 行程编码

  - 较长的相邻像素值，多用于图像变换后
  - 改变图像的描述方式，无损

    - 一维、二维
- Huffman编码（熵编码）

  - 出现多--短编码，无损

  - 基本原理
- 香农-范诺编码
- 预测编码
  - 差
- DCT编码
  - 有损压缩，视觉不敏感
- 混合编码

  - 行程编码：擅长于重复数字的压缩。
  - Huffman编码：擅长于像素个数分布不均匀情况下的编码。
  - DCT变换：擅长分离视觉敏感与不敏感的部分。





